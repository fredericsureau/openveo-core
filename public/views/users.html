<div class="users">
  <h2 ng-bind="'USERS.TITLE' | translate"></h2>
  <div class="well well-lg" ng-bind="'USERS.INFO' | translate"></div>
  <p class="ng-hide" ng-show="!users.length" ng-bind="'USERS.NO_DATA' | translate"></p>
  
  <div class="ng-hide" ng-show="users.length">
  
    <div class="row header">
      <div class="col-xs-12 col-sm-10"><strong ng-bind="'USERS.NAME_COLUMN' | translate"></strong></div>
      <div class="col-xs-2 hidden-xs"><strong ng-bind="'USERS.ACTIONS_COLUMN' | translate"></strong></div>      
    </div>
    
    <div class="row line bg-success" ng-repeat="user in users">
      <div class="col-xs-12 col-sm-10" ng-click="toggleUserDetails(user)">
        <span class="glyphicon" aria-hidden="true" ng-class="{'glyphicon-chevron-right' : !user.opened, 'glyphicon-chevron-down' : user.opened}"></span> <strong>[[user.name]]</strong>
      </div>
      <div class="col-xs-2 hidden-xs">
        <div class="actions dropdown" ng-click="toggleSubMenu($event)">
          <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
          <ul class="dropdown-menu" role="menu">          
            <li role="presentation"><a role="menuitem" href="#" ng-click="removeUser(user)" ng-bind="'USERS.REMOVE' | translate"></a></li>
          </ul>
        </div>
      </div>
      <div class="row" ng-if="user.opened">
        <div class="col-xs-12 detail">
          <form ov-form name="editForm" ng-submit="editForm.$valid && saveUser(editForm, user)" novalidate>
            <ul>

              <li class="form-inline">
                <div class="form-group">
                  <label class="label label-default control-label" ng-bind="'USERS.ATTR_NAME' | translate"></label>
                  <ov-editable ov-name="name" ov-value="user.name" ov-type="text" ov-required="true" ov-disabled="editForm.saving" ng-class="{'has-error': editForm.name.$invalid && editForm.$submitted}">
                  </ov-editable>
                </div>
              </li>
              
              <li class="form-inline">
                <div class="form-group">
                  <label class="label label-default control-label" ng-bind="'USERS.ATTR_EMAIL' | translate"></label>
                  <ov-editable ov-name="email" ov-value="user.email" ov-type="text" ov-required="true" ov-disabled="editForm.saving" ng-class="{'has-error': editForm.email.$invalid && editForm.$submitted}">
                  </ov-editable>
                </div>
              </li>
              
              <li class="form-inline">
                <div class="form-group">
                  <label class="label label-default control-label" ng-bind="'USERS.ATTR_ROLE' | translate"></label>
                  <ov-editable ov-name="roles" ov-options="rolesOptions" ov-value="user.rolesValues" ov-type="checkbox" ov-required="false" ov-disabled="editForm.saving" ng-class="{'has-error': editForm.roles.$invalid && editForm.$submitted}">
                  </ov-editable>
                </div>
              </li>
              
            </ul>
            
            <div class="btn-group" role="group" ng-show="!editForm.edition">
              <button type="button" ng-click="openEdition(editForm);" class="btn btn-primary" ng-bind="'USERS.FORM_EDIT' | translate"></button>
            </div>
            <div class="btn-group" role="group" ng-show="editForm.edition">
              <button type="button" ng-click="cancelEdition(editForm)" class="btn btn-default" ng-bind="'USERS.FORM_CANCEL' | translate" ng-disabled="user.saving"></button>
              <button ng-show="editForm.edition" type="submit" class="btn btn-primary" ng-bind="'USERS.FORM_SAVE' | translate" ng-disabled="user.saving"></button>
            </div>
          </form>
          
        </div>
      </div>      
    </div>
    
  </div>
  
  <hr/>
  
  <div class="row">
    <div class="col-xs-12 col-sm-6">
      <h4><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> <span ng-bind="'USERS.ADD_USER' | translate"></span></h4>
      <form class="form-horizontal" name="addForm" ng-submit="addForm.$valid && addUser(addForm)" novalidate>
        
        <div class="form-group" ng-class="{'has-error': addForm.userName.$invalid && addForm.$submitted}">
          <label for="userName" ng-bind="'USERS.FORM_ADD_NAME' | translate"></label>
          <input type="text" name="userName" class="has-error form-control" id="userName" placeholder="[['USERS.FORM_ADD_NAME' | translate]]" ng-model="userName" ng-disabled="addForm.saving" required>
          <small><em ng-bind="'USERS.FORM_ADD_NAME_DESC' | translate"></em></small>
        </div>
        
        <div class="form-group" ng-class="{'has-error': addForm.userEmail.$invalid && addForm.$submitted}">
          <label for="userEmail" ng-bind="'USERS.FORM_ADD_EMAIL' | translate"></label>
          <input type="text" name="userEmail" class="has-error form-control" id="userName" placeholder="[['USERS.FORM_ADD_EMAIL' | translate]]" ng-model="userEmail" ng-disabled="addForm.saving" required>
          <small><em ng-bind="'USERS.FORM_ADD_EMAIL_DESC' | translate"></em></small>
        </div>
        
        <div class="form-group" ng-class="{'has-error': addForm.userPassword.$invalid && addForm.$submitted}">
          <label for="userPassword" ng-bind="'USERS.FORM_ADD_PASSWORD' | translate"></label>
          <input type="password" name="userPassword" class="has-error form-control" id="userPassword" placeholder="[['USERS.FORM_ADD_PASSWORD' | translate]]" ng-model="userPassword" ng-disabled="addForm.saving" required>
          <small><em ng-bind="'USERS.FORM_ADD_PASSWORD_DESC' | translate"></em></small>
        </div>
        
        <div class="form-group" ng-class="{'has-error': addForm.userPasswordValidate.$invalid && addForm.$submitted}">
          <label for="userPasswordValidate" ng-bind="'USERS.FORM_ADD_PASSWORD_VALIDATE' | translate"></label>
          <input type="password" name="userPasswordValidate" class="has-error form-control" id="userPasswordValidate" placeholder="[['USERS.FORM_ADD_PASSWORD_VALIDATE' | translate]]" ng-model="userPasswordValidate" ng-disabled="addForm.saving" required>
          <small><em ng-bind="'USERS.FORM_ADD_PASSWORD_VALIDATE_DESC' | translate"></em></small>
        </div>
        
        <p class="ng-hide" ng-show="!roles.length" ng-bind="'USERS.NO_ROLE' | translate"></p>

        <div class="form-group ng-hide" ng-show="roles.length">
          <label ng-bind="'USERS.FORM_ADD_ROLE' | translate"></label>

          <div>
            <label ng-repeat="(roleName, role) in roles" class="checkbox-inline">
              <input type="checkbox" name="userRoles" id="userRoles" ng-disabled="addForm.saving" ng-model="role.activated"> <span ng-bind="role.name | translate"></span>
            </label>
          </div>

          <div>
            <small><em ng-bind="'USERS.FORM_ADD_ROLE_DESC' | translate"></em></small>
          </div>
        </div>
        
        <div class="form-group">
          <button type="submit" class="btn btn-primary" ng-bind="'USERS.FORM_ADD_BUTTON' | translate" ng-disabled="addForm.saving"></button>
        </div>
        
      </form>
    </div>
  </div>
  
</div>